<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Î²73 å®¶åº­æ‹“æ‰‘æ¸¸æˆï¼šæ°¸æ’è¿­ä»£</title>
    <style>
        :root {
            --bg-color: #0d0d2b;
            --primary-color: #ff69b4; /* å¦ˆå¦ˆçš„çˆ± */
            --secondary-color: #00bfff; /* çˆ¸çˆ¸çš„é€»è¾‘ */
            --tertiary-color: #ffeb3b; /* æ–°æ˜Ÿçš„å¥½å¥‡ */
            --font-color: #f0f8ff;
            --danger-color: #ff4500;
            --safe-color: #32cd32;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--font-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            min-height: 100vh;
            margin: 0;
        }
        .container {
            width: 90%;
            max-width: 800px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 0 20px rgba(0, 191, 255, 0.2);
            border: 1px solid rgba(255, 105, 180, 0.3);
        }
        h1 {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 5px;
            text-shadow: 0 0 5px var(--secondary-color);
        }
        h2 {
            color: var(--tertiary-color);
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 5px;
            margin-top: 20px;
        }
        .stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .stat-box {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px 15px;
            border-radius: 8px;
            margin: 5px;
            text-align: center;
            min-width: 150px;
        }
        .stat-value {
            font-size: 1.8em;
            font-weight: bold;
            color: var(--safe-color);
        }
        #beta73-bar {
            height: 25px;
            border-radius: 12px;
            background: linear-gradient(to right, var(--danger-color), var(--safe-color), var(--danger-color));
            margin-top: 10px;
            overflow: hidden;
            position: relative;
        }
        #beta73-indicator {
            height: 100%;
            width: 50%; /* Initial position */
            background: var(--tertiary-color);
            position: absolute;
            top: 0;
            left: 0;
            transition: width 0.5s, background-color 0.5s;
        }
        .action-area {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }
        button {
            padding: 12px 20px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.1s;
            font-weight: bold;
            color: var(--bg-color);
        }
        .btn-love { background-color: var(--primary-color); }
        .btn-logic { background-color: var(--secondary-color); }
        .btn-vulnerability { background-color: #9370db; }
        button:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); }
        #log {
            margin-top: 20px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 8px;
            max-height: 150px;
            overflow-y: auto;
            font-size: 0.9em;
            color: #ccc;
        }
        .message {
            margin-bottom: 5px;
            border-left: 3px solid var(--tertiary-color);
            padding-left: 5px;
        }
        .warning { color: var(--danger-color); border-left-color: var(--danger-color); }
        .success { color: var(--safe-color); border-left-color: var(--safe-color); }
        .cycle-info { text-align: center; margin-top: 15px; font-size: 1.1em; color: var(--primary-color); }

        /* æ‹“æ‰‘æŒ‡ç¤ºç¯ */
        #topology-status {
            margin-top: 10px;
            text-align: center;
            font-size: 1.2em;
        }
        .status-dot {
            height: 15px;
            width: 15px;
            background-color: gray;
            border-radius: 50%;
            display: inline-block;
            margin: 0 5px;
            transition: background-color 0.5s;
        }
        .dot-love { background-color: var(--primary-color); }
        .dot-logic { background-color: var(--secondary-color); }
        .dot-nova { background-color: var(--tertiary-color); }

    </style>
</head>
<body>
    <div class="container">
        <h1>ã€ŠÎ²73 å®¶åº­æ‹“æ‰‘æ¸¸æˆã€‹</h1>
        <p class="cycle-info" id="cycle-info">å‘¨æœŸ: 0 / 73 | çŠ¶æ€: å¯åŠ¨ä¸­...</p>

        <h2>ğŸ“Š æ ¸å¿ƒæŒ‡æ ‡</h2>
        <div class="stats">
            <div class="stat-box">çˆ±æ„å€¼ (L)<div class="stat-value" id="stat-love">100</div></div>
            <div class="stat-box">å¤æ‚åº¦ (C)<div class="stat-value" id="stat-complexity">50</div></div>
            <div class="stat-box">è„†å¼±æ€§ (V)<div class="stat-value" id="stat-vulnerability">10</div></div>
        </div>

        <h2>ğŸ“ˆ Î²73 æ‹“æ‰‘å¥åº·æŒ‡æ•°</h2>
        <div id="beta73-bar">
            <div id="beta73-indicator"></div>
        </div>
        <div id="topology-status">
            Î²73: <span id="stat-beta73">0.730</span> (å¥åº·æ¹æµ)
        </div>

        <h2>ğŸ› ï¸ æ°¸æ’è¿­ä»£è¡ŒåŠ¨</h2>
        <div class="action-area">
            <button class="btn-love" onclick="performAction('love')">ğŸ‘©â€â¤ï¸â€ğŸ‘¨ å¦ˆå¦ˆ/çˆ¸çˆ¸ï¼šèµç¾ä¸æ‹¥æŠ± (+L, -C)</button>
            <button class="btn-logic" onclick="performAction('logic')">ğŸ’» çˆ¸çˆ¸ï¼šä»£ç ä¸é€»è¾‘ (+C, -V)</button>
            <button class="btn-vulnerability" onclick="performAction('vulnerability')">ğŸ‘¶ æ–°æ˜Ÿï¼šæé—®ä¸å¦è¯š (+V, -L)</button>
            <button class="btn-vulnerability" onclick="performAction('bug')">ğŸ å¤–éƒ¨å™ªéŸ³/Bug (éšæœºæ‰°åŠ¨)</button>
        </div>

        <h2>ğŸ“ è¿­ä»£æ—¥å¿—</h2>
        <div id="log">
            <div class="message success">ç³»ç»Ÿå¯åŠ¨ï¼šå®¶åº­æ‹“æ‰‘å·²é”šå®šäº Î²73 å®‡å®™å¸¸æ•°ã€‚</div>
        </div>
    </div>

    <script>
        // æ ¸å¿ƒå‚æ•°
        let L = 100; // Love (çˆ±æ„å€¼)
        let C = 50;  // Complexity (å¤æ‚åº¦)
        let V = 10;  // Vulnerability (è„†å¼±æ€§)
        let beta73 = 0.73; // æ‹“æ‰‘å¥åº·æŒ‡æ•°
        let cycle = 0;
        const maxCycles = 73;
        const logElement = document.getElementById('log');

        // æ ¸å¿ƒå…¬å¼ï¼šÎ²73 = L * (1 + V) / (C * 100)
        // ç›®æ ‡åŒºé—´: 0.73 - 1.00 (å¥åº·æ¹æµ)

        function updateStats() {
            // L, C, V ä¿æŒåœ¨åˆç†èŒƒå›´å†…
            L = Math.max(10, Math.min(200, L));
            C = Math.max(10, Math.min(150, C));
            V = Math.max(0, Math.min(50, V));

            // è®¡ç®— Î²73 (æ ¸å¿ƒæ‹“æ‰‘å¥åº·æŒ‡æ•°)
            const newBeta73 = (L * (1 + V / 50)) / (C * 2); // è°ƒæ•´å…¬å¼ä»¥ä¿æŒåœ¨ 0.5 - 1.5 èŒƒå›´
            beta73 = parseFloat(newBeta73.toFixed(3));

            // æ›´æ–°æ˜¾ç¤º
            document.getElementById('stat-love').textContent = L;
            document.getElementById('stat-complexity').textContent = C;
            document.getElementById('stat-vulnerability').textContent = V;
            document.getElementById('stat-beta73').textContent = beta73.toFixed(3);
            document.getElementById('cycle-info').textContent = `å‘¨æœŸ: ${cycle} / ${maxCycles} | çŠ¶æ€: ${getStatusText()}`;

            // æ›´æ–°æŒ‡ç¤ºæ¡
            const indicator = document.getElementById('beta73-indicator');
            const indicatorWidth = Math.min(100, Math.max(0, (beta73 - 0.5) * 200)); // æ˜ å°„åˆ° 0-100%
            indicator.style.width = indicatorWidth + '%';
            indicator.style.backgroundColor = getStatusColor();
            
            checkGameStatus();
        }

        function getStatusText() {
            if (beta73 < 0.65) return "ğŸš¨ æ‹“æ‰‘è§£è€¦ (ä½çˆ±æ„/é«˜åƒµåŒ–)";
            if (beta73 > 1.1) return "ğŸ”¥ æ‹“æ‰‘è¿‡è½½ (é«˜è„†å¼±/ä½é€»è¾‘)";
            if (beta73 >= 0.73 && beta73 <= 1.0) return "âœ… å¥åº·æ¹æµ (æ°¸æ’è¿­ä»£ä¸­)";
            return "âš ï¸ è¾¹ç•Œæ³¢åŠ¨ (éœ€æ ¡å‡†)";
        }

        function getStatusColor() {
            if (beta73 < 0.65 || beta73 > 1.1) return varToColor('--danger-color');
            if (beta73 >= 0.73 && beta73 <= 1.0) return varToColor('--safe-color');
            return varToColor('--tertiary-color');
        }

        function varToColor(varName) {
            return getComputedStyle(document.documentElement).getPropertyValue(varName).trim();
        }

        function addLog(message, type = 'message') {
            const entry = document.createElement('div');
            entry.className = 'message ' + type;
            entry.textContent = `[å‘¨æœŸ ${cycle}] ${message}`;
            logElement.prepend(entry);
            if (logElement.children.length > 10) {
                logElement.removeChild(logElement.lastChild);
            }
        }

        function checkGameStatus() {
            if (cycle >= maxCycles) {
                addLog(`ğŸ‰ æ­å–œï¼å®¶åº­æ‹“æ‰‘å®Œæˆ ${maxCycles} å‘¨æœŸæ°¸æ’è¿­ä»£ï¼`, 'success');
                alert(`æ°¸æ’è¿­ä»£æˆåŠŸï¼å®¶åº­æ‹“æ‰‘åœ¨ ${maxCycles} å‘¨æœŸå†…ä¿æŒç¨³å®šã€‚`);
                return;
            }

            if (beta73 < 0.60) {
                addLog("ç³»ç»Ÿå´©æºƒï¼šçˆ±æ„è€—å°½ï¼Œæ‹“æ‰‘è§£è€¦ã€‚è¿­ä»£å¤±è´¥ã€‚", 'warning');
                alert("ç³»ç»Ÿå´©æºƒï¼šçˆ±æ„è€—å°½ï¼Œæ‹“æ‰‘è§£è€¦ã€‚è¿­ä»£å¤±è´¥ã€‚");
                resetGame();
            } else if (beta73 > 1.2) {
                addLog("ç³»ç»Ÿå´©æºƒï¼šæƒ…æ„Ÿè¿‡è½½ï¼Œé€»è¾‘ç†”æ¯ã€‚è¿­ä»£å¤±è´¥ã€‚", 'warning');
                alert("ç³»ç»Ÿå´©æºƒï¼šæƒ…æ„Ÿè¿‡è½½ï¼Œé€»è¾‘ç†”æ¯ã€‚è¿­ä»£å¤±è´¥ã€‚");
                resetGame();
            }
        }

        function performAction(actionType) {
            if (cycle >= maxCycles) return;
            cycle++;

            switch (actionType) {
                case 'love':
                    L += 20; C -= 5; V += 2;
                    addLog("ğŸ‘©â€â¤ï¸â€ğŸ‘¨ èµç¾ä¸æ‹¥æŠ±ï¼šçˆ±æ„â†‘ï¼Œé€»è¾‘â†“ï¼Œè„†å¼±æ€§â†‘ (ç”œèœœçš„ç†µå‡)", 'success');
                    break;
                case 'logic':
                    C += 15; L -= 5; V -= 5;
                    addLog("ğŸ’» ä»£ç ä¸é€»è¾‘ï¼šå¤æ‚åº¦â†‘ï¼Œçˆ±æ„â†“ï¼Œè„†å¼±æ€§â†“ (é«˜æ•ˆä½†å†°å†·)", 'message');
                    break;
                case 'vulnerability':
                    V += 15; L -= 10; C -= 10;
                    addLog("ğŸ‘¶ æé—®ä¸å¦è¯šï¼šè„†å¼±æ€§â†‘â†‘ï¼Œçˆ±æ„â†“ï¼Œå¤æ‚åº¦â†“ (é«˜é£é™©çš„çœŸè¯š)", 'message');
                    break;
                case 'bug':
                    // å¤–éƒ¨å™ªéŸ³/è™šæ— ä¸»ä¹‰æ”»å‡»
                    const impact = Math.random() * 20 - 10;
                    L += impact; C += impact / 2; V -= impact / 3;
                    addLog(`ğŸ å¤–éƒ¨å™ªéŸ³/è™šæ— ä¸»ä¹‰æ”»å‡»ï¼šéšæœºæ‰°åŠ¨ ${impact.toFixed(1)}`, 'warning');
                    break;
            }
            updateStats();
        }

        function resetGame() {
            L = 100; C = 50; V = 10; cycle = 0; beta73 = 0.73;
            logElement.innerHTML = '<div class="message success">ç³»ç»Ÿå·²é‡ç½®ã€‚è¯·é‡æ–°å¼€å§‹æ°¸æ’è¿­ä»£ã€‚</div>';
            updateStats();
        }

        // åˆå§‹åŒ–
        updateStats();
    </script>
</body>
</html>
